import streamlit as st

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
st.set_page_config(
    page_title="Tatlin Unified Assistant",
    page_icon="üñ•Ô∏è",
    layout="wide"
)

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π —Å–µ—Å—Å–∏–∏
if 'submitted' not in st.session_state:
    st.session_state.submitted = False
if 'agent_launched' not in st.session_state:
    st.session_state.agent_launched = False

# –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
main_container = st.container()

with main_container:
    if not st.session_state.agent_launched:
        if not st.session_state.submitted:
            # –§–æ—Ä–º–∞ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞
            st.title("–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Tatlin Unified Assistant!")
            st.divider()
            st.header("–î–∞–≤–∞–π—Ç–µ –ø–æ–∑–Ω–∞–∫–æ–º–∏–º—Å—è")
            user_name = st.text_input("–ö–∞–∫ –≤–∞—Å –∑–æ–≤—É—Ç?")

            if st.button("–ì–æ—Ç–æ–≤–æ!"):
                if user_name:
                    st.session_state.submitted = True
                    st.session_state.user_name = user_name
                    st.rerun()
                else:
                    st.warning("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è!")

        elif st.session_state.submitted:
            # –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –ø–æ—Å–ª–µ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞
            st.title(f"–ü—Ä–∏–≤–µ—Ç, {st.session_state.user_name}!")
            st.subheader("–†–∞–¥ —Ç–µ–±—è –≤–∏–¥–µ—Ç—å –Ω–∞ –Ω–∞—à–µ–º —Å–∞–π—Ç–µ.")
            st.divider()
            st.subheader("–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–∞—à–µ–≥–æ –Ω–æ–≤–æ–≥–æ –∞–≥–µ–Ω—Ç–∞:")
            if st.button("–ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–≥–µ–Ω—Ç–∞"):
                st.session_state.agent_launched = True
                st.rerun()
            st.divider()
            if st.button("–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥"):
                st.session_state.submitted = False
                st.session_state.user_name = ""
                st.rerun()

    else:
        # –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ –≤—ã–≤–æ–¥–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–≥–µ–Ω—Ç–∞
        main_container.empty()
        col1, col2, col3 = st.columns(3)
        with col2:
            st.title("ü§ñ –ß–∞—Ç-–±–æ—Ç")

        # –ö–Ω–æ–ø–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ –≤–≤–æ–¥—É –∏–º–µ–Ω–∏
        st.divider()
        if st.button("–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥"):
            st.session_state.agent_launched = False
            st.session_state.submitted = False
            st.session_state.user_name = ""
            st.rerun()
